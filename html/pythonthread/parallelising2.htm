<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='zh-CN' xml:lang='zh-CN' xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
  <title>Python 并发编程之使用多线程和多处理器 - 技术翻译 - 开源中国社区</title>
        <link rel="stylesheet" href="/css/channel.css?date=2014042202" type="text/css" media="screen" />
  <link rel="stylesheet" type="text/css" href="/js/2011/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
  <link rel="alternate" type="application/rss+xml" title="最新开源项目" href="http://www.oschina.net/project/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新开源资讯" href="http://www.oschina.net/news/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新问题列表" href="http://www.oschina.net/question/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新翻译列表" href="http://www.oschina.net/translate/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新博客列表" href="http://www.oschina.net/blog/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新代码分享列表" href="http://www.oschina.net/code/rss" />
  <link rel="alternate" type="application/rss+xml" title="开源中国 - 源码列表" href="http://www.oschina.net/code/source_rss" />
  <script type="text/javascript" src="/js/2012/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="/js/2012/jquery.form.js"></script>
  <script type="text/javascript" src="/js/2011/fancybox/jquery.fancybox-fixed.js?2014031702"></script>
    <link rel="stylesheet" href="/js/poshytip/tip-yellowsimple/tip-yellowsimple.css" type="text/css" />
  <script type="text/javascript" src="/js/poshytip/jquery.poshytip.min.js"></script>
  <script type="text/javascript">
  	g_user = {
	id:0,
	name:'',
	login:false};  </script>
    <script type="text/javascript" src="/js/2011/oschina.js?ver=20121007"></script>
  <script type="text/javascript" src="/js/utils.js"></script>
  <script type="text/javascript" src="/js/channel.js?2014022501"></script>
    </head>
<body>

<div id='OSC_Banner'><div class="wp998"><a href='http://www.oschina.net/' class='Logo' title='OSChina 开源中国'>开源中国</a>
<h1><a href="/translate">技术翻译</a></h1>
<div class='clear'></div></div></div>
<div id="OSC_Screen">
	<div id="OSC_Content" class='CenterDiv'>
<style type="text/css">
.highlight {
	color: #A00;
	padding: 0 1px;
	margin: 0 2px;
}

.NoData {
	text-align: center;
	padding: 20px 0;
	color: #999;
}

.error_msg {
	height: 16px;
	color: #A00;
	margin: 10px 0 10px 0;
	background: url('/img/warning.gif') no-repeat left center;
	padding-left: 24px;
}

.error_msg a {
	padding: 0 5px 0 5px;
	font-weight: bold;
}

.ajax_processing {
	display: none;
	background: url('/img/loading.gif') no-repeat left center;
	padding-left: 20px;
}

label.SELECTED {
	color: #C00;
}

input.TEXT,textarea.TEXT,input.SEARCH {
	border: 1px solid #bbb;
	font-size: 13px;
	padding: 3px;
}

input.BUTTON {
	height: 25px;
	line-height: 25px;
	padding: 0 3px;
}

.mb10 {
	margin-bottom: 10px;
}

a.rndbutton {
	background: #d1c0a5;
	color: #fff;
	text-decoration: none;
	height: 30px;
	float: left;
	margin: 0;
	border: 0px solid #000;
	font-weight: bold;
	font-size: 12pt;
	cursor: pointer;
}

a.rndbutton:hover {
	background-color: #bfaa88;
}

a.rndbutton span {
	color: #fff;
	float: left;
	margin: 0 0 0 10px;
	padding: 0 10px 0 0;
	height: 30px;
	line-height: 30px;
}

input.rndbutton {
	background: #4E867B;
	color: #fff;
	border: 0px solid #000;
	cursor: pointer;
}

input.rndbutton:hover {
	background-color: #4F978A;
}

.SmallPortrait {
	filter: alpha(opacity = 90); /* IE */
	-moz-opacity: 0.9; /* Moz + FF */
	opacity: 0.9;
	padding: 1px;
	background: #fff;
	border: 1px solid #ccc;
}

a:hover .SmallPortrait {
	filter: alpha(opacity = 100); /* IE */
	-moz-opacity: 1.0; /* Moz + FF */
	opacity: 1.0;
	border: 1px solid #40AA53;
}

.TextContent p {
	margin-bottom: 5pt;
}

.TextContent h1,.TextContent h2,.TextContent h3 {
	margin-bottom: 10pt;
	border-bottom: 1px solid #CCC;
	padding-bottom: 5px;
}

.translate {
	float: left;
	width: 678px;
}

.translate_right {
	float: right;
	width: 300px;
	overflow: hidden;
}

.translate_right .PopularTags {
	margin: 0 0 10px 0;
	background: white;
	border: 1px solid #eee;
	box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
	-moz-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
	-webkit-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
}

.translate_right .PopularTags p {
	padding: 10px;
}

#top_nav {
	width: 100%;
	font-size: 14px;
	line-height: 24px;
	padding: 2px;
	border-bottom: 1px solid #40AA53;
}

#top_nav a {
	color: #005075;
	outline: 0;
	text-decoration: none;
}

#top_nav .right {
	float: right;
	color: #666;
}

ul.tabnav {
	text-align: left;
	margin: 1em 0 0 0;
	font-weight: bold;
	font-size: 10pt;
	border-bottom: medium double #E3E3E3;
	list-style-type: none;
	padding: 3px 10px 15px 10px;
}

ul.tabnav li {
	display: inline;
	margin-left: 10px;
}

ul.tabnav li.current {
	border-bottom: 1px solid #fff;
	background-color: #fff;
}

ul.tabnav li.current a {
	background-color: #0D5178;
	color: #FFF;
	cursor: text;
}

ul.tabnav li a {
	padding: 4px 8px 5px 8px;
	color: #666;
	margin-right: 0px;
	text-decoration: none;
	border-bottom: none;
}

ul.tabnav a:hover {
	background: #FFF;
	text-decoration: none;
}

.header span {
	margin-left: 10px;
	font-size: 9pt;
	color: #666;
}

.header a.parent {
	color: #40AA53;
}

.header em.child {
	color: #46B;
	font-style: normal;
}

.header .more .active {
	color: #A00;
}

.remark {
	margin-top: 8px;
	font-size: 9pt;
	color: #999999;
}

.sta_btn {
	border: 1px solid #ccc;
	padding: 2px 5px;
	float: right;
	margin-right: 10px;
	-webkit-box-shadow: 0 1px 3px rgba(198, 198, 198, 0.5);
	box-shadow: 0 1px 3px rgba(198, 198, 198, 0.5);
}

.remark a {
	text-decoration: none;
}

.remark em {
	margin-right: 8px;
	font-style: normal;
}

.remark span {
	margin-left: 8px;
	margin-right: 8px;
}

.latest {
	margin: 10px 10px 0px 10px;
	padding-bottom: 10px;
	border-bottom: 1px solid #e3e3e3;
	_height: 1%;
}

.latest dt a {
	font-size: 18px;
}

.latest .content {
	font-size: 14px;
	line-height: 24px;
	height: auto;
	overflow: hidden;
	color: #333;
}

.recommendList {
	margin-bottom: 10px;
}

.recommendList a {
	text-decoration: none;
}

.recommendList a:hover {
	text-decoration: underline;
}

.recommendList a.pic img {
	float: right;
	width: 140px;
	height: 100px;
	border: 0;
	margin: 18px 5px;
}

.recommendList ul {
	margin: 8px 0;
}

.recommendList li {
	float: left;
	width: 300px;
	margin: 0 10px;
	font-size: 12px;
	line-height: 30px;
	color: #3E62A6;
	overflow: hidden;
	white-space: nowrap;
	-o-text-overflow: ellipsis;
	text-overflow: ellipsis;
}

.recommendList li a {
	font-size: 13px;
}

.latest span,.recommendList li span {
	color: #999;
	font-size: 12px;
}

.articleList {
	background: #FFF;
	padding-bottom: 10px;
}

.articleList .article {
	margin: 10px;
	padding-bottom: 10px;
	border-bottom: medium double #e3e3e3;
}

.articleList .article a img {
	float: right;
	width: 80px;
	height: 60px;
	border: 0;
	margin: 18px 5px;
}

.articleList .article dt a {
	text-decoration: none;
	font-size: 16px;
}

.articleList .article dt a:hover {
	text-decoration: underline;
}

.articleList .article dt a em {
	font-style: normal;
	color: #A00;
}

.articleList .article .status_0 {
	padding-left: 20px;
	height: 20px;
	line-height: 20px;
	margin-top: 8px;
	font-style: normal;
	color: #F90;
	background: url(/img/translate.gif) 0 -30px no-repeat;
}

.articleList .article .status_2 {
	padding-left: 20px;
	height: 20px;
	line-height: 20px;
	margin-top: 8px;
	font-style: normal;
	color: #00BB4B;
	background: url(/img/translate.gif) 0 0 no-repeat;
}

.articleList .article .status_0 em,.articleList .article .status_2 em {
	font-style: normal;
	color: #888;
	margin-left: 10px;
}

.articleList .article .sub_title {
	font-size: 12px;
	color: #333;
	margin-top: 5px;
}

.articleList .article .content {
	font-size: 13px;
	line-height: 24px;
	height: auto;
	overflow: hidden;
	color: #333;
}

.articleList .pager {
	margin: 0 10px;
}

.articleList .TagDetail {
	margin: 10px 2px;
	color: #666;
	border: 2px solid #ccc;
	padding: 5px;
	background: #ffd;
	font-size: 9pt;
}

.articleList .TagDetail img.project {
	float: left;
	width: 48px;
	height: 48px;
	margin: 0 20px 10px 0;
}

#categoryMenu {
	margin-bottom: 10px;
	background: white;
}

#categoryMenu ul {
	margin: 10px 0;
}

#categoryMenu li a {
	display: block;
	text-decoration: none;
	height: 36px;
	line-height: 36px;
	font-size: 14px;
	color: #3B3B3B;
	padding: 0 15px;
}

#categoryMenu li a:hover {
	background: #EEE;
	color: #080;
}

#categoryMenu li a em {
	float: right;
	padding: 0 5px;
	margin-top: 8px;
	height: 20px;
	line-height: 20px;
	background: #EEE;
	font-size: 12px;
	font-style: normal;
	border-radius: 3px;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
}

#categoryMenu li a:hover em {
	background: #00BC00;
	color: white;
}

#categoryMenu li.current,#categoryMenu li.current a:hover {
	background: #3dae4f;
	background: -moz-linear-gradient(#3dae4f, #0c701c);
	background: -webkit-linear-gradient(#3dae4f, #0c701c);
}

#categoryMenu li.current a {
	color: white;
}

#categoryMenu li.current a em {
	color: white;
	background: none;
}

.hotList,.TopUsers {
	margin-bottom: 10px;
	background: #FFF;
}

.hotList a {
	text-decoration: none;
}

.hotList a:hover {
	text-decoration: underline;
}

.hotList ul {
	margin: 10px 0;
}

.hotList ul li {
	height: 24px;
	width: 278px;
	padding: 0 10px;
	overflow: hidden;
	white-space: nowrap;
	-o-text-overflow: ellipsis;
	text-overflow: ellipsis;
}

.hotList ul li a {
	height: 24px;
	line-height: 24px;
	font-size: 10pt;
}

.hotList .dot {
	height: 10px;
	width: 10px;
	font-size: 0;
	margin-right: 5px;
	overflow: hidden;
	zoom: 1;
	display: inline-block;
	*display: inline;
	*zoom: 1;
}

.hotList .dot1 {
	background-color: #f00;
}

.hotList .dot2 {
	background-color: #f90;
}

.hotList .dot3 {
	background-color: #aed900;
}

.hotList .dot4 {
	background-color: #2bd600;
}

.hotList .dot5 {
	background-color: #00bb4b;
}

.hotList .dot6 {
	background-color: #01bebe;
}

.hotList .dot7 {
	background-color: #035bdf;
}

.hotList .dot8 {
	background-color: #2200a8;
}

.hotList .dot9 {
	background-color: #510066;
}

.hotList .dot10 {
	background-color: #3f0030;
}

.TopUsers ul {
	padding-left: 12px;
}

.TopUsers ul li {
	text-align: center;
	margin: 0 7px 10px 0;
	float: left;
	overflow: hidden;
	font-size: 7pt;
}

.TopUsers ul {
	margin-top: 10px;
}

.TopUsers ul li a {
	text-decoration: none;
}

.TopUsers ul li img {
	width: 64px;
	height: 64px;
	background: #fff;
}

.TopUsers ul li a:hover img {
	
}

a.cmdbutton {
	background: #5CC26F;
	color: #fff;
	text-decoration: none;
	float: left;
	margin: 0 10px;
	border: 0px solid #000;
	font-size: 16pt;
	cursor: pointer;
}

a.cmdbutton:hover {
	background-position: left -30px;
}

a.cmdbutton span {
	color: #fff;
	float: left;
	margin: 6px;
	padding: 0 10px;
	height: 30px;
	line-height: 30px;
}

a.cmdbutton.paying-translation {
	width: 240px;
	margin-top: 20px;
	padding: 6px;
	text-align: center;
}

.Article {
	margin-top: 10px;
}

.Article .Top {
	padding: 10px;
	background: #EDEDED;
	color: #666;
}

.Article .Top h1 {
	padding-bottom: 5px;
	font-size: 28px;
	line-height: 36px;
	font-weight: normal;
	color: #333;
}

.Article .Top h1 em.none {
	font-style: normal;
	color: #F90;
}

.Article .Top h1 em.pending {
	font-style: normal;
	color: #00BB4B;
}

.Article .Top h3 {
	margin: 2px 0;
	font-size: 18px;
	color: #393939;
	font-weight: normal;
}

.Article .Top h3 a {
	text-decoration: none;
}

.Article .Top .Tags a {
	margin-left: 5px;
	text-decoration: none;
}

.Article .Top .Tags a.tag {
	background: #46A6D2;
	color: white;
	padding: 2px 5px;
}

.Article .Top .Tags a.tag:hover {
	background-color: #3a7bd2;
}

.Article .Top .rec_user {
	height: 22px;
	line-height: 22px;
}

.Article .Top .rec_user a {
	text-decoration: none;
}

.Article .Top .rec_user .share a {
	width: 16px;
	height: 16px;
	text-decoration: none;
	display: inline-block;
	zoom: 1;
	vertical-align: middle;
	margin-left: 5px;
}

.Article .Top .rec_user .share .sina {
	background: url(/img/sina_weibo.png) no-repeat;
}

.Article .Top .rec_user .share .tencent {
	background: url(/img/tencent_weibo.png) no-repeat;
}

.Article .Top .rec_user .options {
	float: right;
}

.Article .Top .Vote {
	float: right;
	margin-right: 20px;
	padding: 5px;
	background: #005075;
	color: #FFF;
	width: 54px;
	text-align: center;
	display: block;
}

.Article .Top .Vote a {
	font-size: 16pt;
	color: #FFF;
	display: block;
	border-top: 1px solid #073f59;
	text-decoration: none;
}

.Article .Top .Vote a:hover {
	color: #ff0;
}

.Article .Top .Vote em {
	font-size: 12pt;
	font-style: normal;
	padding-bottom: 5px;
	border-bottom: 1px solid #04608a;
	display: block;
}

.Article .toolbar {
	overflow: hidden;
	padding: 5px 0 5px 5px;
	color: #6A6A6A;
	border-left: 1px solid #EDEDED;
	border-right: 1px solid #EDEDED;
}

.Article .toolbar a {
	text-decoration: none;
}

.Article .toolbar .label {
	float: left;
	width: 100px;
}

.Article .toolbar em {
	color: #A3A3A3;
	font-style: normal;
	font-size: 12px;
}

.Article .toolbar a.t_user {
	
}

.Article .toolbar .options {
	float: right;
	width: 260px;
	text-align: right;
	padding-right: 5px;
}

.Article .toolbar .options a.selected {
	color: #b90000;
	font-weight: bold;
}

.Article .toolbar .contributers {
	width: 610px;
	float: left;
}

.Article .Tags {
	line-height: 22px;
}

.Article .copyright {
	background: #efe;
	text-align: left;
	margin: 20px 10px;
	padding: 3px 0 3px 10px;
	color: #333;
	font-size: 10pt;
	line-height: 22px;
	border-left: 10px solid #CFC;
}

.Article .Body {
	border: 1px solid #EDEDED;
}

.Article .Body .paragraph_eng {
	background: #FFF;
	padding: 10px 0;
	border: 1px solid #F9F9F9;
}

.Article .Body .paragraph_eng .TextContent {
	width: 750px;
	padding: 0 10px;
	font-size: 10pt;
	line-height: 180%;
	overflow: hidden;
}

.Article .Body .paragraph_eng .TextContent span {
	margin: 0 2px;
}

.Article .Body .paragraph_eng .translaters {
	width: 210px;
	padding: 0 6px;
}

.Article .Body .translate_chs {
	padding: 0;
	border: 3px solid #F9F9F9;
}

.Article .Body .translate_chs .bdt10 {
	border-top: medium double #E3E3E3;
}

.Article .Body .bd10 {
	border: 1px solid #A00;
}

.Article .Body .paragraph_chs {
	background: #FFF;
	padding: 10px 0;
}

.Article .Body .paragraph_chs .TextContent {
	width: 750px;
	font-size: 10.5pt;
	padding: 0 10px;
	overflow: hidden;
}

.Article .Body .paragraph_chs .translater {
	width: 210px;
	padding: 0 6px;
}

.translaters h3 {
	color: #686868;
	font-size: 14px;
	font-weight: normal;
	margin: 2px 0;
}

.translaters ul {
	margin: 10px 0;
}

.translaters ul li {
	text-align: center;
	margin: 0 3px 5px 0px;
	width: 45px;
	height: 48px;
	float: left;
	overflow: hidden;
	font-size: 7pt;
}

.translaters ul li a {
	text-decoration: none;
}

.translaters ul li img {
	width: 24px;
	height: 24px;
	border: 1px solid #ddd;
	padding: 2px;
	background: #fff;
}

.translaters ul li a:hover img {
	border: 1px solid #40AA53;
}

a.TBUTTON {
	text-decoration: none;
	background: #4E867B;
	border: none;
	color: #FFF;
	font-size: 18px;
	padding: 4px 14px;
	margin-right: 3px;
}

a.TBUTTON:hover {
	background: #4f978a;
}

input.TBUTTON {
	background: #4E867B;
	border: none;
	color: #FFF;
	font-size: 18px;
	padding: 4px 14px;
	margin-right: 3px;
	cursor: pointer;
}

input.TBUTTON:hover {
	background: #4f978a;
}

.translater a {
	text-decoration: none;
}

.translater a img {
	float: left;
	width: 46px;
	height: 46px;
	border: 1px solid #ddd;
	padding: 2px;
	margin-top: 5px;
	background: #fff;
}

.translater .info {
	float: left;
	margin: 0 10px;
	width: 126px;
	height: 45px;
}

.translater .info h6 {
	font-weight: normal;
	font-size: 10pt;
	color: #444;
}

.translater .info p {
	color: #666;
	margin: 5px 0;
}

.translater .info p em {
	color: #A00;
	margin: 0 2px;
}

.translater .vote {
	height: 30px;
	line-height: 30px;
	margin-top: 20px;
	color: #666;
}

.translater a.showOthers {
	padding-left: 20px;
	background: url(/img/translate.gif) 0 -218px no-repeat;
	font-size: 10pt;
	height: 30px;
	line-height: 30px;
}

.translater a.closeOthers {
	background: url(/img/translate.gif) 0 -250px no-repeat;
}

.EditTop {
	width: 99%;
	text-align: left;
	margin: 0 auto;
}

.Edit .Top {
	margin-top: 10px;
	padding: 10px;
	background: #EDEDED;
	color: #666;
}

.Edit .Top h1 {
	font-size: 20px;
	line-height: 26px;
	font-weight: normal;
	color: #333;
}

.Edit .Top h3 {
	margin: 2px 0;
	font-size: 14px;
	color: #393939;
	font-weight: normal;
}

.Edit .Top h3 a {
	text-decoration: none;
}

.Edit .Body {
	margin-top: 10px;
	padding: 10px;
	background: #EDEDED;
}

.Edit .Body .p_content {
	float: left;
	width: 49%;
	height: 650px;
}

.Edit .Body .p_content .title {
	height: 28px;
	line-height: 28px;
	font-size: 12pt;
	text-align: center;
}

.Edit .Body .p_content .title h3 {
	color: #666;
	font-weight: normal;
}

.Edit .Body .p_content .title a {
	text-decoration: underline;
}

.Edit .Body .p_content .title .prev {
	float: left;
}

.Edit .Body .p_content .title .next {
	float: right;
}

.Edit .Body .p_content .TextContent {
	height: 572px;
	padding: 5px;
	border: 1px solid #CCC;
	overflow-y: auto;
	overflow-x: hidden;
	background: #F6F6F6;
	font-size: 10pt;
}

.Edit .Body .p_editor {
	float: right;
	width: 49.5%;
	height: 650px;
}

.Edit .Body .p_toolbar {
	float: left;
	height: 650px;
	line-height: 650px;
	text-align: center;
	width: 1.3%;
}

.Edit .Body .p_toolbar a {
	text-decoration: none;
	width: 100%;
	background: #4E867B;
	color: white;
	font-size: 8pt;
	-moz-border-radius: 2px;
	border-radius: 2px;
	-webkit-border-radius: 2px;
}

.Edit .action {
	margin-top: 20px;
	float: right;
}

.Bottom {
	margin: 20px 0;
}

.Bottom .comments {
	float: left;
	width: 680px;
}

.comments h2 {
	font-size: 12pt;
	border-bottom: medium double #E3E3E3;
	margin: 5px;
	padding: 0 0 3px 5px;
}

.comments h2 span {
	margin-left: 10px;
	color: #444;
	font-size: 10pt;
	font-weight: normal;
}

.comments h2 em.reply_count {
	font-style: normal;
	color: #A00;
}

.comments h2 .more {
	float: right;
	font-weight: normal;
	font-size: 10pt;
	color: #666;
}

.comments .comment {
	margin: 5px 0 15px 0;
	padding: 5px 0 5px 5px;
	border-bottom: 1px dashed #ddd;
}

.comments .comment .user {
	float: left;
	width: 40px;
	margin: 0 12px 0 0;
	font-size: 9pt;
	color: #666;
}

.comments .comment .user img {
	width: 32px;
	height: 32px;
	margin: 3px 0 0 0;
}

.comments .comment .body {
	float: left;
	width: 620px;
}

.comments .comment .body .time {
	float: left;
	width: 380px;
	font-size: 9pt;
	color: #666;
}

.comments .comment .body .time a {
	color: #999;
}

.comments .comment .body .time a:hover {
	background: #666;
	color: #fff;
}

.comments .comment .body .opts {
	float: right;
	width: 190px;
	font-size: 9pt;
	text-align: right;
}

.comments .comment .body .opts a {
	color: #999;
	padding: 0 2px;
}

.comments .comment .body .opts a:hover {
	background: #666;
	color: #fff;
}

.comments .comment .body .detail {
	margin: 10px 0;
	font-size: 10.5pt;
}

.comments .comment .body .detail div.ref {
	border: 1px solid #999;
	margin: 0 0 10px 0;
	padding: 3px;
	font-size: 9pt;
	color: #333;
	background: #ffe;
}

.comments .comment .body .detail div.ref h4 {
	margin: 0;
	padding: 2px 0px 3px 0px;
	color: #1E50A2;
	font-size: 9pt;
	font-weight: normal;
}

.comments .comment .body .detail div.ref .ref_body {
	margin: 0;
	padding: 2px;
	line-height: 20px;
	color: #666;
	font-size: 9pt;
	color: #333;
}

.comments .comment .body .detail div.ref .ref_body img {
	display: none;
	width: 0;
	height: 0;
}

.comments .pager {
	margin-left: 60px;
}

.commentForm {
	margin: 20px 0;
}

.commentForm .user {
	float: left;
	width: 60px;
}

.commentForm .user img {
	width: 32px;
	height: 32px;
	margin: 0 0 0 5px;
}

.commentForm form {
	float: left;
}

.commentForm form textarea {
	border: 1px solid #999;
}

.commentForm form input.SUBMIT {
	font-size: 18px;
	padding: 4px 10px;
	margin: 10px 0;
	float: right;
}

.myList table {
	margin: 10px;
	font-size: 10pt;
	table-layout: fixed;
}

.myList table td {
	vertical-align: top;
	overflow: hidden;
}

.myList a {
	text-decoration: none;
}

.myList .title {
	
}

.myList .title a {
	text-decoration: none;
	color: #46B;
}

.myList .title span {
	font-size: 9pt;
	color: #999;
}

.myList .vote {
	width: 50px;
	font-size: 9pt;
	color: #999;
}

.myList .date {
	width: 70px;
	font-size: 9pt;
	color: #999;
}

.myList .opts {
	width: 100px;
	text-align: right;
	color: #999;
}

.myList .pager {
	margin: 0 10px 10px 10px;
}

.cmptable {
	table-layout: fixed;
	background: #EDEDED;
}

.cmptable td.eng {
	background-color: #FFFFFF;
	padding: 5px;
	overflow: hidden;
	font-size: 10pt;
	line-height: 1.5;
}

.cmptable td.chs {
	background-color: #FFFFFF;
	padding: 5px;
	overflow: hidden;
	font-size: 10.5pt;
	line-height: 1.5;
}

.cmptable td p {
	margin: 10px 0;
}

.cmptable td .infoicon {
	float: right;
	background: #EBEBEB;
	height: 20px;
	padding: 0 6px;
	line-height: 20px;
	z-index: 999;
	text-align: center;
	font-size: 11px;
	color: #060;
	border-radius: 3px;
	cursor: pointer;
}

.cmptable td .infoicon img {
	margin-left: 5px;
	vertical-align: middle;
	padding-top: 2px;
}

.cmptable td .infocard {
	position: absolute;
	top: 30px;
	right: 0px;
	padding: 5px 10px;
	font-size: 10pt;
	border-radius: 8px;
	z-index: 100;
	background: #EDEDED;
	display: none;
}

.cmptable td .infocard h1 {
	height: 20px;
	line-height: 20px;
	font-size: 15px;
	color: #666;
	margin-bottom: 5px;
	border-bottom: 1px dotted #CCC;
}

.cmptable td .infocard h1 a.close {
	float: right;
	font-size: 6pt;
}

.cmptable td .infocard h1 a.close img {
	width: 15px;
	height: 15px;
}

.cmptable td .infocard a {
	text-decoration: none;
}

.cmptable td .infocard a img {
	float: left;
	width: 50px;
	height: 50px;
}

.cmptable td .infocard .text {
	float: left;
	margin-left: 10px;
}

.cmptable td .infocard h6 {
	font-weight: normal;
	font-size: 10pt;
	color: #444;
}

.cmptable td .infocard p {
	color: #666;
	margin: 0;
	padding: 0;
}

.cmptable td .infocard p em {
	color: #A00;
	margin: 0 2px;
}

.cmptable td  ol {
	list-style-type: decimal;
	margin: 0.5em 0 0.5em 1.5em;
	line-height: 1.5em;
}

.cmptable td  ul {
	list-style-type: disc;
	margin: 0.5em 0 0.5em 1.5em;
	line-height: 1.5em;
}

.QuestionHeader {
	height: 34px;
	border-bottom: 1px solid #40AA53;
	margin: 0 0 15px 0;
}

.QuestionHeader #portrait {
	float: left;
	width: 35px;
}

.QuestionHeader #portrait img {
	width: 24px;
	height: 24px;
}

.QuestionHeader #switcher {
	float: left;
	margin: 5px 0 0 2px;
}

.QuestionHeader #switcher h1 {
	font-size: 12pt;
	float: left;
	color: #666;
}

.QuestionHeader #switcher h1 a {
	text-decoration: none;
}

.QuestionHeader #switcher h1 em {
	font-style: normal;
	color: #40AA53;
}

.QATip {
	margin: 40px 0 50px 100px;
}

.QATip h1 {
	font-size: 13.5pt;
}

.QATip h1 em {
	color: #A00;
	font-style: normal;
}

.QATip .text {
	margin: 20px 0 20px 20px;
	font-size: 11pt;
}

.QATip .text p.hint {
	color: #A00;
	font-size: 10pt;
	margin-top: 10px;
}

.QATip .text ul {
	margin: 10px 0 0 0;
	list-style-type: disc;
	list-style-position: inside;
	line-height: 24px;
}

.QATip .btn_view {
	margin-left: 20px;
}

.AllTags {
	padding-bottom: 10px;
}

.AllTags ul.tagList {
	margin: 10px;
}

.AllTags ul.tagList li {
	float: left;
	width: 24%;
}

.AllTags ul.tagList li .stat {
	color: #666;
	font-size: 8pt;
	-webkit-text-size-adjust: none;
}

.AllTags a.tag,.PopularTags a.tag {
	background-color: #E0EAF1;
	border-bottom: 1px solid #3E6D8E;
	border-right: 1px solid #7F9FB6;
	color: #3E6D8E;
	font-size: 8pt;
	-webkit-text-size-adjust: none;
	line-height: 2.4;
	margin: 2px 2px 2px 0;
	padding: 2px 4px;
	text-decoration: none;
	white-space: nowrap;
}

.AllTags a.tag em,.PopularTags a.tag em {
	font-style: normal;
	color: #666;
	font-size: 7pt;
	margin-left: 2px;
}

.AllTags a.tag:hover,.PopularTags a.tag:hover {
	background-color: #3E6D8E;
	color: #fff;
}

.AllTags a.tag:hover em,.PopularTags a.tag:hover em {
	color: #fff;
}

.AllTags .pager {
	margin: 0 10px;
}</style>
<div class='Article'>
	<div class='Top'>
		<div class='Vote'><em id='vote_count'>11</em><a href='javascript:vote_article(2064);'>顶</a></div>
		<h1>
            Python 并发编程之使用多线程和多处理器
                    </h1>
		<h3>英文原文：<a href='http://www.quantstart.com/articles/Parallelising-Python-with-Threading-and-Multiprocessing' target='_blank'>Parallelising Python with Threading and Multiprocessing</a></h3>
        <div class='Tags'>
		<strong>标签：</strong>
						<a href='http://www.oschina.net/translate/tag/python' class='tag project image' data-id='968' title='面向对象编程语言 Python'>Python</a> 		        		</div>
		<div class='rec_user'>
            <span class="options">
                                <style>
#TagsSwitcher{color:#A00;}
#RecTags,#MyTags{margin:5px 0;}
#RecTags a.tag{line-height:24px;}
#favor_form p:first-child{margin:5px 0;}
#favor_form{width:200px;}
#favor_form p {color:#666;}
#favor_form form{min-height: 85px;width:200px;}
#favor_form form ._favor_input{display:block;margin:2px 0;width:199px;}
#favor_form form ._favor_button{float:left;padding:2px 5px;}
.favor_ok {text-align:center;font-size:10.5pt;width:199px;height:60px;margin-top:10px;}
#TagsSwitcher{cursor:pointer;float:right;margin-top:10px;}
#MyTags{display:none;width:199px;}
#MyTags a.tag {float:left; background-color: #E0EAF1;border-bottom: 1px solid #3E6D8E;border-right: 1px solid #7F9FB6;color: #3E6D8E;font-size: 8pt;line-height: 16px;margin: 2px 2px 2px 0;padding: 2px 4px;text-decoration: none;white-space: nowrap;}
#MyTags a.tag:hover{background-color: #3E6D8E;color: #FFF;}
</style>
<script type='text/javascript'>
var favor_add = "<a href='javascript:add_to_favor(2064,7)' id='favor_trigger' title='添加到收藏夹'>我要收藏</a>";
var favor_del = "<a href='javascript:delete_favor(2064,7)' id='favor_trigger' style='color:#a00;'>取消收藏</a>";
var favor_ok = "<p class='favor_ok'>已成功添加到收藏夹<br/><br/> <a href='null/favorites?type=7'>我的收藏夹</a> | <a href='javascript:close_favor()'>关闭</a></p>";
function delete_favor(obi_id, obj_type){
	$('#attention_it').html(favor_add);
	$("#p_attention_count").load("/action/favorite/cancel?type="+obj_type+"&id="+obi_id, {user: ''});
}
function add_to_favor(obj_id, obj_type){
	if(confirm('必须登录后才能收藏，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+encodeURIComponent(location.href);
	}
}
function close_favor(elem_id){
    $('#favor_trigger').poshytip('destroy');
}
function setTag(tv){
	var t = $("._favor_input");
	var value = t.val();
	var tags = value.replace(/，/ig,',').split(',');
	var exist = false;
	value = $.map(tags,function(v,i){
		if($.trim(tv) == $.trim(v)){
			exist = true;
			return undefined;
		}
		return v;
	}).join(',');
	if(exist){
		t.val(value);
		return;
	}
	if(value!="")
		t.val(value+","+tv);
	else
		t.val(tv)
}
function ltrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(0)) != -1){
        var j=0, i = s.length;
        while (j < i && whitespace.indexOf(s.charAt(j)) != -1){
            j++;
        }
        s = s.substring(j, i);
    }
    return s;
}

function rtrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(s.length-1)) != -1){
        var i = s.length - 1;
        while (i >= 0 && whitespace.indexOf(s.charAt(i)) != -1){
            i--;
        }
        s = s.substring(0, i+1);
    }
    return s;
}
 
function trim(str){
    return rtrim(ltrim(str));
}
</script>
<em id='p_attention_count'>0</em>人收藏此文章,
<span id='attention_it'>
	<script type='text/javascript'>document.write(favor_add);</script>
</span>
<script type="text/javascript">
	$(document).ready(function(){
    	$.ajax({
    		url:"/action/favorite/attentionUsersCount",
    		type:"get",
    		data:"id="+2064+"&type="+7,
    		success:function(msg){
				$("#p_attention_count").html(msg);
    		}
    	});
	});
</script>            </span>
			<a href='http://my.oschina.net/osadmin' target='_blank'>oschina</a> 推荐于 3个月前 (共 9 段, 翻译完成于 05-07) (<a href='#comments'>14评</a>)
            <span class="share">
                                <a class="sina" title="分享到新浪微博"  href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','Python 并发编程之使用多线程和多处理器 - 技术翻译: 在Python编码中我们经常讨论的一个方面就是如何优化模拟执行的性能。尽管在考虑量化代码时NumPy、SciPy和pandas在这方面已然非常有用，但在构建事件驱动系统时我们无法有...','','utf-8'));"></a><a class="tencent" title="分享到腾讯微博"  href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&amp;appkey=96f54f97c4de46e393c4835a266207f4&amp;site=&amp;title='+encodeURIComponent(document.title)+encodeURIComponent(': 在Python编码中我们经常讨论的一个方面就是如何优化模拟执行的性能。尽管在考虑量化代码时NumPy、SciPy和pandas在这方面已然非常有用，但在构建事件驱动系统时我们无法有...'),'', 'width=450, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');}())"></a>
            </span>
		</div>
		<div class='clear'></div>
	</div>
		<div class='toolbar'>
				<span class='label'>参与翻译<em>(6人)</em>：</span>
        <div class="contributers"><a href='http://my.oschina.net/jidianren' target='_blank' class='t_user'>几点人</a>, <a href='http://my.oschina.net/zqstarmoon' target='_blank' class='t_user'>地狱星星</a>, <a href='http://my.oschina.net/alazyer' target='_blank' class='t_user'>alazyer</a>, <a href='http://my.oschina.net/theforever' target='_blank' class='t_user'>赵亮-碧海情天</a>, <a href='http://my.oschina.net/Garfielt' target='_blank' class='t_user'>Garfielt</a>, <a href='http://my.oschina.net/crooner' target='_blank' class='t_user'>无若</a></div>		
				<div class='options'>
                    <a href='http://www.oschina.net/translate/parallelising-python-with-threading-and-multiprocessing' class='selected'>仅中文</a> | <a href='http://www.oschina.net/translate/parallelising-python-with-threading-and-multiprocessing?cmp' target="_blank">中英文对照</a> | <a href='http://www.oschina.net/translate/parallelising-python-with-threading-and-multiprocessing?lang=eng'>仅英文</a> | <a href="?print" target="_blank">打印此文章</a>
                </div>
	</div>
			<div class='Body' style="position:relative;">
								                    <div id='translate_32729' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>在Python编码中我们经常讨论的一个方面就是如何优化模拟执行的性能。尽管在考虑量化代码时NumPy、SciPy和pandas在这方面已然非常有用，但在构建<em>事件驱动</em>系统时我们无法有效地使用这些工具。有没有可以加速我们代码的其他办法？答案是肯定的，但需要留意！</p> 
<p>在这篇文章中，我们看一种不同的模型-<em>并发</em>，我们可以将它引入我们Python程序中。这种模型在模拟中工作地特别好，它不需要共享状态。Monte Carlo模拟器可以用来做期权定价以及检验算法交易等类型的各种参数的模拟。</p> 
<p>我们将特别考虑<a href="https://docs.python.org/2/library/threading.html" rel="nofollow">Threading</a>库和<a href="https://docs.python.org/2/library/multiprocessing.html" rel="nofollow">Multiprocessing</a>库。</p></div></td>
    </tr>
    </table>
</div>
        		                    <div id='translate_32730' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><h3 id="content_h3_2_5"><strong>Python并发</strong> </h3> 
<p>当Python初学者探索多线程的代码为了计算密集型优化时，问得最多的问题之一是：”当我用多线程的时候，为什么我的程序变慢了？“</p> 
<p>在多核机器上，我们期望多线程的代码使用额外的核，从而提高整体性能。不幸的是，主Python解释器（CPython）的内部并不是真正的多线程，是通过一个全局解释锁（GIL）来进行处理的。</p> 
<p>GIL是必须的，因为Python解释器是非线程安全的。这意味着当从线程内尝试安全的访问Python对象的时候将有一个全局的强制锁。在任何时候，仅仅一个单一的线程能够获取Python对象或者C API。每100个字节的Python指令解释器将重新获取锁，这（潜在的）阻塞了I/0操作。因为锁，CPU密集型的代码使用线程库时，不会获得性能的提高，但是当它使用多处理库时，性能可以获得提高。</p></div></td>
    </tr>
</table>
<div id='other_translate_32730' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_32731' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><h2 id="content_h2_3_5">并行库的实现</h2> 
<p>现在，我们将使用上面所提到的两个库来实现对一个“小”问题进行并发优化。</p> 
<h3 id="content_h3_3_7">线程库</h3> 
<p>上面我们提到： 运行CPython解释器的Python不会支持通过多线程来实现多核处理。不过，Python确实有一个<a target="_blank" href="https://docs.python.org/2/library/threading.html" rel="nofollow">线程库</a>。那么如果我们（可能）不能使用多个核心进行处理，那么使用这个库能取得什么好处呢？</p> 
<p>许多程序，尤其是那些与网络通信或者数据输入/输出(I/O)相关的程序，都经常受到网络性能或者输入/输出(I/O)性能的限制。这样Python解释器就会等待哪些从诸如网络地址或者硬盘等“远端”数据源读写数据的函数调用返回。因此这样的数据访问比从本地内存或者CPU缓冲区读取数据要慢的多。</p> 
<p>因此，如果许多数据源都是通过这种方式访问的，那么就有一种方式对这种数据访问进行性能提高，那就是对每个需要访问的数据项都产生一个线程 。</p></div></td>
    </tr>
</table>
<div id='other_translate_32731' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_32732' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p> 举个例子，假设有一段Python代码，它用来对许多站点的URL进行扒取。再假定下载每个URL所需时间远远超过计算机CPU对它的处理时间，那么仅使用一个线程来实现就会大大地受到输入/输出(I/O)性能限制。 </p> 
<p> 通过给每个下载资源生成一个新的线程，这段代码就会并行地对多个数据源进行下载，在所有下载都结束的时候再对结果进行组合。这就意味着每个后续下载都不会等待前一个网页下载完成。此时，这段代码就受收到客户/服务端带宽的限制。 </p> 
<p> 不过，许多与财务相关的应用都受到CPU性能的限制，这是因为这样的应用都是高度集中式的对数字进行处理。这样的应用都会进行大型线性代数计算或者数值的随机统计，比如进行蒙地卡罗模拟统计。所以只要对这样的应用使用Python和全局解释锁(GIL)，此时使用Python线程库就不会有任何性能的提高。 </p></div></td>
    </tr>
    </table>
</div>
        		                    <div id='translate_32733' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><p><strong>Python实现</strong> </p> 
<p>下面这段依次添加数字到列表的“玩具”代码，举例说明了多线程的实现。每个线程创建一个新的列表并随机添加一些数字到列表中。这个已选的“玩具”例子对CPU的消耗非常高。</p> 
<p>下面的代码概述了线程库的接口，但是他不会比我们用单线程实现的速度更快。当我们对下面的代码用多处理库时，我们将看到它会显著的降低总的运行时间。</p> 
<p>让我们检查一下代码是怎样工作的。首先我们导入threading库。然后我们创建一个带有三个参数的函数list_append。第一个参数count定义了创建列表的大小。第二个参数id是“工作”(用于我们输出debug信息到控制台)的ID。第三个参数out_list是追加随机数的列表。</p></div></td>
    </tr>
</table>
<div id='other_translate_32733' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_32734' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><p>__main__函数创建了一个10<sup>7</sup>的size，并用两个threads执行工作。然后创建了一个jobs列表，用于存储分离的线程。threading.Thread<span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;line-height:21.333332061767578px;background-color:#F6F6F6;">对象将list_append函数作为参数，并将它附加到jobs列表。</span> </p> 
<p><span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;line-height:21.333332061767578px;background-color:#F6F6F6;">最后，jobs分别开始并分别“joined”。join()方法阻塞了调用的线程（例如主Python解释器线程）直到线程终止。在打印完整的信息到控制台之前，确认所有的线程执行完成。</span> </p> 
<p><span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;line-height:21.333332061767578px;background-color:#F6F6F6;"> </span></p> 
<pre class="brush:python;toolbar: true; auto-links: false;">#&nbsp;thread_test.pyimport&nbsp;randomimport&nbsp;threadingdef&nbsp;list_append(count,&nbsp;id,&nbsp;out_list):
	&quot;&quot;&quot;
	Creates&nbsp;an&nbsp;empty&nbsp;list&nbsp;and&nbsp;then&nbsp;appends&nbsp;a&nbsp;
	random&nbsp;number&nbsp;to&nbsp;the&nbsp;list&nbsp;'count'&nbsp;number
	of&nbsp;times.&nbsp;A&nbsp;CPU-heavy&nbsp;operation!
	&quot;&quot;&quot;
	for&nbsp;i&nbsp;in&nbsp;range(count):
		out_list.append(random.random())if&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:
	size&nbsp;=&nbsp;10000000&nbsp;&nbsp;&nbsp;#&nbsp;Number&nbsp;of&nbsp;random&nbsp;numbers&nbsp;to&nbsp;add
	threads&nbsp;=&nbsp;2&nbsp;&nbsp;&nbsp;#&nbsp;Number&nbsp;of&nbsp;threads&nbsp;to&nbsp;create

	#&nbsp;Create&nbsp;a&nbsp;list&nbsp;of&nbsp;jobs&nbsp;and&nbsp;then&nbsp;iterate&nbsp;through
	#&nbsp;the&nbsp;number&nbsp;of&nbsp;threads&nbsp;appending&nbsp;each&nbsp;thread&nbsp;to
	#&nbsp;the&nbsp;job&nbsp;list&nbsp;
	jobs&nbsp;=&nbsp;[]
	for&nbsp;i&nbsp;in&nbsp;range(0,&nbsp;threads):
		out_list&nbsp;=&nbsp;list()
		thread&nbsp;=&nbsp;threading.Thread(target=list_append(size,&nbsp;i,&nbsp;out_list))
		jobs.append(thread)

	#&nbsp;Start&nbsp;the&nbsp;threads&nbsp;(i.e.&nbsp;calculate&nbsp;the&nbsp;random&nbsp;number&nbsp;lists)
	for&nbsp;j&nbsp;in&nbsp;jobs:
		j.start()

	#&nbsp;Ensure&nbsp;all&nbsp;of&nbsp;the&nbsp;threads&nbsp;have&nbsp;finished
	for&nbsp;j&nbsp;in&nbsp;jobs:
		j.join()

	print&nbsp;&quot;List&nbsp;processing&nbsp;complete.&quot;</pre> 
<p>我们能在控制台中调用如下的命令time这段代码</p> 
<p><span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;line-height:21.333332061767578px;background-color:#F6F6F6;"> </span></p> 
<pre class="brush:python;toolbar: true; auto-links: false;">time&nbsp;python&nbsp;thread_test.py</pre> 
<p>将产生如下的输出 <br /> </p> 
<p><span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;line-height:21.333332061767578px;background-color:#F6F6F6;"> </span></p> 
<pre class="brush:python;toolbar: true; auto-links: false;">List&nbsp;processing&nbsp;complete.
real&nbsp;&nbsp;&nbsp;&nbsp;0m2.003s
user&nbsp;&nbsp;&nbsp;&nbsp;0m1.838s
sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0m0.161s</pre> 
<p>注意user时间和sys时间相加大致等于real时间。这表明我们使用线程库没有获得性能的提升。我们期待real时间显著的降低。在并发编程的这些概念中分别被称为CPU时间和挂钟时间（wall-clock time） <br /> </p></div></td>
    </tr>
</table>
<div id='other_translate_32734' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_32735' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3 id="content_h3_7_5">多进程处理库<br /> </h3> 
<p>为了充分地使用所有现代处理器所能提供的多个核心 ，我们就要使用<a target="_blank" href="https://docs.python.org/2/library/multiprocessing.html" rel="nofollow">多进程处理库</a> 。它的工作方式与线程库完全不同 ，不过两种库的语法却非常相似 。</p> 
<p>多进程处理库事实上对每个并行任务都会生成多个操作系统进程。通过给每个进程赋予单独的Python解释器和单独的全局解释锁(GIL)十分巧妙地规避了一个全局解释锁所带来的问题。而且每个进程还可独自占有一个处理器核心，在所有进程处理都结束的时候再对结果进行重组。</p> 
<p>不过也存在一些缺陷。生成许多进程就会带来很多I/O管理问题，这是因为多个处理器对数据的处理会引起数据混乱 。这就会导致整个运行时间增多 。不过，假设把数据限制在每个进程内部 ，那么就可能大大的提高性能 。当然，再怎么提高也不会超过<a target="_blank" href="http://en.wikipedia.org/wiki/Amdahl%27s_law" rel="nofollow">阿姆达尔法则</a>所规定的极限值。</p></div></td>
    </tr>
    </table>
</div>
        		                    <div id='translate_32736' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p><strong>Python实现</strong></p> 
<p>使用Multiprocessing实现仅仅需要修改导入行和multiprocessing.Process行。这里单独的向目标函数传参数。除了这些，代码几乎和使用Threading实现的一样：</p> 
<pre class="brush:python;toolbar: true; auto-links: false;">#&nbsp;multiproc_test.pyimport&nbsp;randomimport&nbsp;multiprocessingdef&nbsp;list_append(count,&nbsp;id,&nbsp;out_list):
	&quot;&quot;&quot;
	Creates&nbsp;an&nbsp;empty&nbsp;list&nbsp;and&nbsp;then&nbsp;appends&nbsp;a&nbsp;
	random&nbsp;number&nbsp;to&nbsp;the&nbsp;list&nbsp;'count'&nbsp;number
	of&nbsp;times.&nbsp;A&nbsp;CPU-heavy&nbsp;operation!
	&quot;&quot;&quot;
	for&nbsp;i&nbsp;in&nbsp;range(count):
		out_list.append(random.random())if&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:
	size&nbsp;=&nbsp;10000000&nbsp;&nbsp;&nbsp;#&nbsp;Number&nbsp;of&nbsp;random&nbsp;numbers&nbsp;to&nbsp;add
	procs&nbsp;=&nbsp;2&nbsp;&nbsp;&nbsp;#&nbsp;Number&nbsp;of&nbsp;processes&nbsp;to&nbsp;create

	#&nbsp;Create&nbsp;a&nbsp;list&nbsp;of&nbsp;jobs&nbsp;and&nbsp;then&nbsp;iterate&nbsp;through
	#&nbsp;the&nbsp;number&nbsp;of&nbsp;processes&nbsp;appending&nbsp;each&nbsp;process&nbsp;to
	#&nbsp;the&nbsp;job&nbsp;list&nbsp;
	jobs&nbsp;=&nbsp;[]
	for&nbsp;i&nbsp;in&nbsp;range(0,&nbsp;procs):
		out_list&nbsp;=&nbsp;list()
		process&nbsp;=&nbsp;multiprocessing.Process(target=list_append,&nbsp;
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args=(size,&nbsp;i,&nbsp;out_list))
		jobs.append(process)

	#&nbsp;Start&nbsp;the&nbsp;processes&nbsp;(i.e.&nbsp;calculate&nbsp;the&nbsp;random&nbsp;number&nbsp;lists)		
	for&nbsp;j&nbsp;in&nbsp;jobs:
		j.start()

	#&nbsp;Ensure&nbsp;all&nbsp;of&nbsp;the&nbsp;processes&nbsp;have&nbsp;finished
	for&nbsp;j&nbsp;in&nbsp;jobs:
		j.join()

	print&nbsp;&quot;List&nbsp;processing&nbsp;complete.&quot;</pre> 
<p>控制台测试运行时间：</p> 
<pre class="brush:python;toolbar: true; auto-links: false;">time&nbsp;python&nbsp;multiproc_test.py</pre> 
<p>得到如下输出：</p> 
<pre class="brush:python;toolbar: true; auto-links: false;">List&nbsp;processing&nbsp;complete.
real&nbsp;&nbsp;&nbsp;&nbsp;0m1.045s
user&nbsp;&nbsp;&nbsp;&nbsp;0m1.824s
sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0m0.231s</pre> 
<p></p></div></td>
    </tr>
    </table>
</div>
        		                    <div id='translate_32737' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>在这个例子中可以看到user和sys时间基本相同，而real下降了近两倍。之所以会这样是因为我们使用了两个进程。扩展到四个进程或者将列表的长度减半结果如下（假设你的电脑至少是四核的）：</p> 
<pre class="brush:python;toolbar: true; auto-links: false;">List&nbsp;processing&nbsp;complete.
real&nbsp;&nbsp;&nbsp;&nbsp;0m0.540s
user&nbsp;&nbsp;&nbsp;&nbsp;0m1.792s
sys&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0m0.269s</pre> 
<p>使用四个进程差不多提高了3.8倍速度。但是，在将这个规律推广到更大范围，更复杂的程序上时要小心。数据转换，硬件cacha层次以及其他一些问题会减弱加快的速度。</p> 
<p>在下一篇文章中我们会将Event-Driben Basketer并行化，从而提高其运行多维参数寻优的能力。</p> 
<p>相关阅读：</p> 
<ul> 
 <li><p><a href="http://www.quantstart.com/articles/Cholesky-Decomposition-in-Python-and-NumPy" rel="nofollow">Cholesky Decomposition in Python and NumPy</a></p></li> 
 <li><p><a href="http://www.quantstart.com/articles/European-Vanilla-Call-Put-Option-Pricing-with-Python" rel="nofollow">European Vanilla Call-Put Option Pricing with Python</a></p></li> 
 <li><p><a href="http://www.quantstart.com/articles/Jacobi-Method-in-Python-and-NumPy" rel="nofollow">Jacobi Method in Python and NumPy</a></p></li> 
 <li><p><a href="http://www.quantstart.com/articles/LU-Decomposition-in-Python-and-NumPy" rel="nofollow">LU Decomposition in Python and NumPy</a></p></li> 
 <li><p><a href="http://www.quantstart.com/articles/Options-Pricing-in-Python" rel="nofollow">Options Pricing in Python</a></p></li> 
 <li><p><a href="http://www.quantstart.com/articles/QR-Decomposition-with-Python-and-NumPy" rel="nofollow">QR Decomposition with Python and NumPy</a></p></li> 
 <li><p><a href="http://www.quantstart.com/articles/Quick-Start-Python-Quantitative-Research-Environment-on-Ubuntu-14-04" rel="nofollow">Quick-Start Python Quantitative Research Environment on Ubuntu 14.04</a></p></li> 
</ul></div></td>
    </tr>
    </table>
</div>
        				<div class="copyright">
			本文中的所有译文仅用于学习和交流目的，转载请务必注明文章译者、出处、和本文链接<br/>
			我们的翻译工作遵照 <a href='http://zh.wikipedia.org/wiki/Wikipedia:CC' target='_blank'>CC 协议</a>，如果我们的工作有侵犯到您的权益，请及时联系我们
		</div>
	</div>
	<div style="margin:10px 0;">
	    </div>
		<div class='Bottom'>
		<div class='google_ads' style='float:right;width:300px;'>
			<script type="text/javascript"><!--
            google_ad_client = "ca-pub-7090564139599510";
            /* translate-comments */
            google_ad_slot = "8977750911";
            google_ad_width = 300;
            google_ad_height = 250;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
		</div>
        <script>
			$(function(){
				$(window).scroll(function() {
					var $offset = $('.google_ads').last().offset();
            		if($(window).scrollTop()>($offset.top)) {
            			$('.google_ads iframe').first().css({'position':'fixed','top':'0px','left':$offset.left+'px','margin-top':'10px','z-index':'999'});
            		}
            		else {
            			$('.google_ads iframe').first().css({'position':'relative','top':'','left':'','margin-top':'0','z-index':'0'});
            		}
				});
			});
		</script>
				<div class='comments'>
			<a name='comments'></a>
			<h2>
                <a href='#top' class="more">回页面顶部</a><a href='#commentForm' class="more" style="margin-right:10px;color:#080;">发表评论</a>
                网友评论<span>共<em class='reply_count'>14</em>条</span>
            </h2>
						<ul class='list'><li class='comment' id='cmt_2064_169326_15810'>
	<div class='user'><a href="http://my.oschina.net/raymin" name="rpl_15810"><img src="http://static.oschina.net/uploads/user/84/169326_50.jpg" align="absmiddle" alt="Raymin" title="Raymin" class="SmallPortrait" user="169326"/></a></div>
	<div class='body'>
		<div class='time'><b>Raymin</b>   发表于 2014-05-08 07:59</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><p>为什么 JavaScript、Lua 就没有 GIL？</p></div>
		<div id='inline_reply_of_2064_169326_15810' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_23734_15811'>
	<div class='user'><a href="http://my.oschina.net/mallon" name="rpl_15811"><img src="http://static.oschina.net/uploads/user/11/23734_50.bmp?t=1397012318000" align="absmiddle" alt="Mallon" title="Mallon" class="SmallPortrait" user="23734"/></a></div>
	<div class='body'>
		<div class='time'><b>Mallon</b> 来自 <a href="http://www.oschina.net/mobile" target="_blank">Windows Phone</a>  发表于 2014-05-08 08:22</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class='ref'><h4>引用来自“Raymin”的评论</h4><p>为什么 JavaScript、Lua 就没有 GIL？</p></div>js lua有线程吗？</div>
		<div id='inline_reply_of_2064_23734_15811' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_860255_15812'>
	<div class='user'><a href="http://my.oschina.net/890128" name="rpl_15812"><img src="http://static.oschina.net/uploads/user/430/860255_50.jpg?t=1351664675000" align="absmiddle" alt="se77en" title="se77en" class="SmallPortrait" user="860255"/></a></div>
	<div class='body'>
		<div class='time'><b>se77en</b>   发表于 2014-05-08 08:48</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><p>题目都翻译错了好吗？并行并发傻傻分不清楚</p></div>
		<div id='inline_reply_of_2064_860255_15812' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_116913_15818'>
	<div class='user'><a href="http://my.oschina.net/visualgui823" name="rpl_15818"><img src="http://static.oschina.net/uploads/user/58/116913_50.jpg?t=1399950167000" align="absmiddle" alt="乌龟壳" title="乌龟壳" class="SmallPortrait" user="116913"/></a></div>
	<div class='body'>
		<div class='time'><b>乌龟壳</b>   发表于 2014-05-08 09:25</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class='ref'><div class='ref'><h4>引用来自“Raymin”的评论</h4><p>为什么 JavaScript、Lua 就没有 GIL？</p></div><h4>引用来自“Mallon”的评论</h4>js lua有线程吗？</div>lua是非线程安全的，js一般都是一个线程跑，依靠异步回调机制并发。</div>
		<div id='inline_reply_of_2064_116913_15818' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_260429_15819'>
	<div class='user'><a href="http://my.oschina.net/neverno" name="rpl_15819"><img src="http://static.oschina.net/uploads/user/130/260429_50.jpg" align="absmiddle" alt="neverno" title="neverno" class="SmallPortrait" user="260429"/></a></div>
	<div class='body'>
		<div class='time'><b>neverno</b>   发表于 2014-05-08 09:29</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><p>翻译有误了<br/>Parallelism=并行性<br/>Concurrence=并发性<br/>并行是多点多U，并发是多点1U或多U。<br/>还有，这里就算英文原文也与源地址的差好大啊，还不如直接撸生肉！</p></div>
		<div id='inline_reply_of_2064_260429_15819' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_23734_15823'>
	<div class='user'><a href="http://my.oschina.net/mallon" name="rpl_15823"><img src="http://static.oschina.net/uploads/user/11/23734_50.bmp?t=1397012318000" align="absmiddle" alt="Mallon" title="Mallon" class="SmallPortrait" user="23734"/></a></div>
	<div class='body'>
		<div class='time'><b>Mallon</b>   发表于 2014-05-08 10:27</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class='ref'><div class='ref'><div class='ref'><h4>引用来自“Raymin”的评论</h4><p>为什么 JavaScript、Lua 就没有 GIL？</p></div><h4>引用来自“Mallon”的评论</h4>js lua有线程吗？</div><h4>引用来自“郭煜”的评论</h4>lua是非线程安全的，js一般都是一个线程跑，依靠异步回调机制并发。</div>而且这几个语言的使用场合都不一样</div>
		<div id='inline_reply_of_2064_23734_15823' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_172600_15829'>
	<div class='user'><a href="http://my.oschina.net/u/172600" name="rpl_15829"><img src="http://static.oschina.net/uploads/user/86/172600_50.jpg" align="absmiddle" alt="TsingWill" title="TsingWill" class="SmallPortrait" user="172600"/></a></div>
	<div class='body'>
		<div class='time'><b>TsingWill</b>   发表于 2014-05-08 11:21</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><p>mark一下，最近正在学习python</p></div>
		<div id='inline_reply_of_2064_172600_15829' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_200468_15835'>
	<div class='user'><a href="http://my.oschina.net/sirxw" name="rpl_15835"><img src="http://static.oschina.net/uploads/user/100/200468_50.jpg?t=1351063303000" align="absmiddle" alt="SupNatural" title="SupNatural" class="SmallPortrait" user="200468"/></a></div>
	<div class='body'>
		<div class='time'><b>SupNatural</b>   发表于 2014-05-08 17:01</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><p>有必要把python模块名翻译成中文嘛？</p></div>
		<div id='inline_reply_of_2064_200468_15835' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_1018448_15838'>
	<div class='user'><a href="http://my.oschina.net/refinedking1" name="rpl_15838"><img src="http://static.oschina.net/uploads/user/509/1018448_50.jpg?t=1399892082000" align="absmiddle" alt="独爱剑走偏锋" title="独爱剑走偏锋" class="SmallPortrait" user="1018448"/></a></div>
	<div class='body'>
		<div class='time'><b>独爱剑走偏锋</b>   发表于 2014-05-08 19:12</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class='ref'><div class='ref'><div class='ref'><h4>引用来自“Raymin”的评论</h4><p>为什么 JavaScript、Lua 就没有 GIL？</p></div><h4>引用来自“Mallon”的评论</h4>js lua有线程吗？</div><h4>引用来自“郭煜”的评论</h4>lua是非线程安全的，js一般都是一个线程跑，依靠异步回调机制并发。</div>HTML5的worker则是多线程模型</div>
		<div id='inline_reply_of_2064_1018448_15838' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_231885_15864'>
	<div class='user'><a href="http://my.oschina.net/yfwz100" name="rpl_15864"><img src="http://static.oschina.net/uploads/user/115/231885_50.jpg" align="absmiddle" alt="yfwz100" title="yfwz100" class="SmallPortrait" user="231885"/></a></div>
	<div class='body'>
		<div class='time'><b>yfwz100</b>   发表于 2014-05-09 13:07</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class='ref'><div class='ref'><div class='ref'><div class='ref'><h4>引用来自“Raymin”的评论</h4><p>为什么 JavaScript、Lua 就没有 GIL？</p></div><h4>引用来自“Mallon”的评论</h4>js lua有线程吗？</div><h4>引用来自“郭煜”的评论</h4>lua是非线程安全的，js一般都是一个线程跑，依靠异步回调机制并发。</div><h4>引用来自“独爱剑走偏锋”的评论</h4>HTML5的worker则是多线程模型</div>HTML5 Worker 不能操作直接操作 DOM？</div>
		<div id='inline_reply_of_2064_231885_15864' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_231885_15866'>
	<div class='user'><a href="http://my.oschina.net/yfwz100" name="rpl_15866"><img src="http://static.oschina.net/uploads/user/115/231885_50.jpg" align="absmiddle" alt="yfwz100" title="yfwz100" class="SmallPortrait" user="231885"/></a></div>
	<div class='body'>
		<div class='time'><b>yfwz100</b>   发表于 2014-05-09 13:09</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class='ref'><h4>引用来自“SupNatural”的评论</h4><p>有必要把python模块名翻译成中文嘛？</p></div>我觉得还是可以的，只要是系统自带的库，因为这些库是按功能组织的，名字并不是专指某个特定实现。除非是外部的库（特定的实现），才用原名（可能是英文）来写上。</div>
		<div id='inline_reply_of_2064_231885_15866' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_97079_15893'>
	<div class='user'><a href="http://my.oschina.net/asdfsx" name="rpl_15893"><img src="http://static.oschina.net/uploads/user/48/97079_50.jpg" align="absmiddle" alt="asdfsx" title="asdfsx" class="SmallPortrait" user="97079"/></a></div>
	<div class='body'>
		<div class='time'><b>asdfsx</b>   发表于 2014-05-10 23:01</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><p>非常蛋疼的线程库~~~这个也是我对python最不满意的一点</p></div>
		<div id='inline_reply_of_2064_97079_15893' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_1018448_15900'>
	<div class='user'><a href="http://my.oschina.net/refinedking1" name="rpl_15900"><img src="http://static.oschina.net/uploads/user/509/1018448_50.jpg?t=1399892082000" align="absmiddle" alt="独爱剑走偏锋" title="独爱剑走偏锋" class="SmallPortrait" user="1018448"/></a></div>
	<div class='body'>
		<div class='time'><b>独爱剑走偏锋</b>   发表于 2014-05-12 00:50</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class='ref'><div class='ref'><div class='ref'><div class='ref'><div class='ref'><h4>引用来自“Raymin”的评论</h4><p>为什么 JavaScript、Lua 就没有 GIL？</p></div><h4>引用来自“Mallon”的评论</h4>js lua有线程吗？</div><h4>引用来自“郭煜”的评论</h4>lua是非线程安全的，js一般都是一个线程跑，依靠异步回调机制并发。</div><h4>引用来自“独爱剑走偏锋”的评论</h4>HTML5的worker则是多线程模型</div><h4>引用来自“yfwz100”的评论</h4>HTML5 Worker 不能操作直接操作 DOM？</div>嗯 至少目前不行,,得要交给master线程来完成</div>
		<div id='inline_reply_of_2064_1018448_15900' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_2064_1177276_16426'>
	<div class='user'><a href="http://my.oschina.net/u/1177276" name="rpl_16426"><img src="/img/portrait.gif" align="absmiddle" alt="juleswkong" title="juleswkong" class="SmallPortrait" user="1177276"/></a></div>
	<div class='body'>
		<div class='time'><b>juleswkong</b> 来自 <a href="http://www.oschina.net/mobile" target="_blank">iPhone</a>  发表于 2014-05-27 20:04</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>很有用</div>
		<div id='inline_reply_of_2064_1177276_16426' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li></ul>
		</div>
        <div class="clear"></div>
	</div>
	</div>
<div class='clear'></div>
<div id="inline_reply_editor" style="display:none;">
    <div class="CommentForm">
        <form id="form_inline_comment" method="POST" action="/action/translate/comment">
            <input id="inline_reply_id" type="hidden" value="" name="reply_id">
			<input type="hidden" value="2064" name="article">
            <textarea id="txt_focus" onkeydown="if((event.metaKey || event.ctrlKey)&&event.keyCode==13){$('#form_inline_comment').submit();}" style="width:400px;height:80px;" name="content"></textarea>
            <br>
            <input class="SUBMIT" type="submit" value="回复">
            <input id="btn_close_inline_reply" class="SUBMIT" type="button" value="关闭">
            文明上网，理性发言
        </form>
    </div>
</div>

<script type="text/javascript" src="/js/sh309/scripts/xregexp-min.js"></script>
<script type="text/javascript" src="/js/sh309/scripts/shCore.min.js"></script>
<script type="text/javascript" src="/js/sh309/scripts/shAutoloader.js"></script>
<link type="text/css" rel="stylesheet" href="/js/sh309/styles/shCore.css"/>
<link type="text/css" rel="Stylesheet" href="/js/sh309/styles/shThemeDefault.css" />

<script type="text/javascript">
SyntaxHighlighter.autoloader(
	'applescript			/js/sh309/scripts/shBrushAppleScript.js',
	'actionscript3 as3		/js/sh309/scripts/shBrushAS3.js',
	'bash shell				/js/sh309/scripts/shBrushBash.js',
	'coldfusion cf			/js/sh309/scripts/shBrushColdFusion.js',
	'cpp c					/js/sh309/scripts/shBrushCpp.js',
	'obj-c objc				/js/sh309/scripts/shBrushObjC.js',
	'c# c-sharp csharp		/js/sh309/scripts/shBrushCSharp.js',
	'css					/js/sh309/scripts/shBrushCss.js',
	'delphi pascal			/js/sh309/scripts/shBrushDelphi.js',
	'diff patch pas			/js/sh309/scripts/shBrushDiff.js',
	'erl erlang				/js/sh309/scripts/shBrushErlang.js',
	'groovy					/js/sh309/scripts/shBrushGroovy.js',
	'haxe hx				/js/sh309/scripts/shBrushHaxe.js',
	'java					/js/sh309/scripts/shBrushJava.js',
	'jfx javafx				/js/sh309/scripts/shBrushJavaFX.js',
	'js jscript javascript	/js/sh309/scripts/shBrushJScript.js',
	'perl pl				/js/sh309/scripts/shBrushPerl.js',
	'php					/js/sh309/scripts/shBrushPhp.js',
	'text plain				/js/sh309/scripts/shBrushPlain.js',
	'py python				/js/sh309/scripts/shBrushPython.js',
	'ruby rails ror rb		/js/sh309/scripts/shBrushRuby.js',
	'scala					/js/sh309/scripts/shBrushScala.js',
	'sql					/js/sh309/scripts/shBrushSql.js',
	'vb vbnet				/js/sh309/scripts/shBrushVb.js',
	'xml xhtml xslt html	/js/sh309/scripts/shBrushXml.js'
);
SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="/action/visit/translate?id=2064"></script>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shThemeDefault.css"/>
<script type='text/javascript'>
$(document).ready(function() {
	$('#form_comment').ajaxForm({
    	dataType: 'json',
		beforeSubmit: function(){
			$('#FormSubmitButton').attr('disabled','disabled');
			$('#form_msg').html("<span class='ajax_processing'>正在提交评论，请稍候...</span>");	
			$('#form_msg').show();	
		},
        success: function(json) {
			$('#FormSubmitButton').removeAttr('disabled');
			    		if(json.msg){
				$('#form_msg').html("<span class='error_msg'>"+json.msg+"</span>");
				$('#form_msg').show();
			}
    		else if(json.id){
    			ajax_get("/translate/show_comment?_cmt_id="+json.id, true, function(data){
    				$('.comments ul.list').append(data);
					$('#txt_comment').val('');
					$('.reply_count').html(json.reply_count);
    			});
				$('#form_msg').hide();
    		}
        }
    });
});
function delete_c(aid,uid,cid) {
	if(confirm("您确认要删除此评论？")){
        ajax_post("/action/translate/delete_comments",{cmt:cid},function(html){
			if(html.length>0)
				alert(html);
			else {
				$("#cmt_"+aid+"_"+uid+"_"+cid).fadeOut();
				$('.reply_count').html(parseInt($('.reply_count').html())-1);
			}
		});
	}
}
function reply_c(aid,uid,cid) {
	$('.inline_reply').empty();
	var div_id = '#inline_reply_of_'+aid+'_'+uid+'_'+cid;
	$('#inline_reply_id').val(uid+'_'+cid);
	$(div_id).html($('#inline_reply_editor').html());
	$('#txt_focus').focus();
	$('#btn_close_inline_reply').click(function(){
		$(div_id).empty();
	});
	$('#form_inline_comment').ajaxForm({
    	dataType: 'json',
    	success: function(json) {
        	if(json.msg){
        		alert(json.msg);
        	}
			else if(json.id){
				ajax_get("/translate/show_comment?_cmt_id="+json.id, true, function(data){
    				$('.comments ul.list').append(data);
					$('.reply_count').html(json.reply_count);
					$(div_id).empty();
    			});
			}
    	}
	});
}
function vote_article(id) {
		alert("必须登录后才能操作 :)");
	}
function vote_block(id) {
		alert("必须登录后才能操作 :)");
	}
function show_other(pid,ppid) {
	if($('#other_translate_'+pid+' .paragraph_chs').length==0) {
    	$('#other_translate_'+pid).show();
    	ajax_post("/translate/show_other_translate","pid="+pid+"&ppid="+ppid,function(html){
    		$('#other_translate_'+pid).hide().html(html);
			// 代码着色
			$('#other_translate_'+pid+' pre').each(function(){
				SyntaxHighlighter.highlight(null,this);
			});
			$('#other_translate_'+pid).slideDown();
    	});
    	}
	else {
		$('#other_translate_'+pid).slideToggle();
	}
	$('#btn_show_other_'+pid).toggleClass('closeOthers');
	$('#translate_'+pid).toggleClass('bd10');
}
function edit_tags(id) {
    popup("/translate/edit_tags?article="+id);
}
</script><div class='clear'></div></div>
	<div id="OSC_Footer" class='CenterDiv'><style>
.oscapp {text-align:left; width:220px;}
.oscapp span {float:left;width:140px;}
.oscapp a {float:left;text-indent:-9999em;width:16px;margin-left:8px;}
.oscapp a.android {background:url('/img/android.gif') no-repeat left center;}
.oscapp a.iphone {background:url('/img/iphone.gif') no-repeat left center;}
.oscapp a.wp7 {background:url('/img/wp7.gif') no-repeat left center;}
</style>
<script type='text/javascript'>
<!--
if (top.location != self.location)top.location=self.location;
//-->
</script></div>
</div>
</body>
</html>
<!-- Generated by OsChina.NET (init:0[ms],page:37[ms],ip:113.96.8.39) -->